<h3>Order Tracking </h3>

<div class="btn-group" role="group" aria-label="Basic radio toggle button group">
    <input type="radio" class="btn-check" name="btnradio" id="btnradio1" autocomplete="off" checked (change)="all()">
    <label class="btn btn-outline-primary" for="btnradio1">All</label>
  
    <input type="radio" class="btn-check" name="btnradio" id="btnradio2" autocomplete="off" (change)="delivered()">
    <label class="btn btn-outline-primary" for="btnradio2">Delivered</label>
  
    <input type="radio" class="btn-check" name="btnradio" id="btnradio3" autocomplete="off" (change)="inProcess()">
    <label class="btn btn-outline-primary" for="btnradio3">In Process</label>

    <input type="radio" class="btn-check" name="btnradio" id="btnradio4" autocomplete="off" (change)="gotWarning()">
    <label class="btn btn-outline-primary" for="btnradio4">Got Warning</label>
</div>


<table class="table table-bordered">
    <thead>
        <tr>
            <th scope="col">OT ID</th>
            <th scope="col">Product ID</th>
            <th scope="col">Product Name</th>
            <th scope="col">Size</th>
            <th scope="col">Quantity</th>
            <th scope="col">Shipping Address</th>
            <th scope="col">Order Status</th>
            <th scope="col">Status Date</th>
            <th scope="col">Status Change</th>
        </tr>
    </thead>
    <tbody>
        <ng-container *ngFor="let myOrderTracing of myOrderTracking">
            <ng-container *ngIf="isDateOlderThan3Days(myOrderTracing.statusChangedAt) && myOrderTracing.status != 'DELIVERED'">
                <tr class="table-danger">
                    <td>{{myOrderTracing.id}}</td>
                    <td>{{myOrderTracing.order.productVariation.product.id}}</td>
                    <td>{{myOrderTracing.order.productVariation.product.name}}</td>
                    <td>{{myOrderTracing.order.productVariation.size}}</td>
                    <td>{{myOrderTracing.order.quantity}}</td>
                    <td>{{myOrderTracing.order.address.name}} |
                        {{myOrderTracing.order.address.contact}} |
                        {{myOrderTracing.order.address.address1}}, {{myOrderTracing.order.address.address2}}
                        {{myOrderTracing.order.address.city}}, {{myOrderTracing.order.address.status}}
                        {{myOrderTracing.order.address.country}}, {{myOrderTracing.order.address.zipcode}}</td>
                    <td>{{myOrderTracing.status}}  <br> <span *ngIf="myOrderTracing.alert == 'true'" style="background-color: red; color: white;">Alert Send By Admin</span></td>
                    <td>{{formatDate(myOrderTracing.statusChangedAt)}}</td>
                    <td>
                        <button class="btn-sm btn btn-primary m-1" (click)="changeStatus(myOrderTracing.id,'packed')">Packed</button> &nbsp;
                        <button class="btn-sm btn btn-primary m-1" (click)="changeStatus(myOrderTracing.id,'shipped')">Shipped</button> &nbsp;
                        <button class="btn-sm btn btn-primary m-1" (click)="changeStatus(myOrderTracing.id,'at_delivery_centre')">At Delivery Centre</button> &nbsp;
                        <button class="btn-sm btn btn-primary m-1" (click)="changeStatus(myOrderTracing.id,'out_for_delivery')">Out for Delivery</button> &nbsp;
                        <button class="btn-sm btn btn-primary m-1" (click)="changeStatus(myOrderTracing.id,'delivered')">Delivered</button>
                    </td>
                </tr>
            </ng-container>
            
            <ng-container *ngIf="!isDateOlderThan3Days(myOrderTracing.statusChangedAt)  && myOrderTracing.status != 'DELIVERED'">
                <tr>
                    <td>{{myOrderTracing.id}}</td>
                    <td>{{myOrderTracing.order.productVariation.product.id}}</td>
                    <td>{{myOrderTracing.order.productVariation.product.name}}</td>
                    <td>{{myOrderTracing.order.productVariation.size}}</td>
                    <td>{{myOrderTracing.order.quantity}}</td>
                    <td>{{myOrderTracing.order.address.name}} |
                        {{myOrderTracing.order.address.contact}} |
                        {{myOrderTracing.order.address.address1}}, {{myOrderTracing.order.address.address2}}
                        {{myOrderTracing.order.address.city}}, {{myOrderTracing.order.address.status}}
                        {{myOrderTracing.order.address.country}}, {{myOrderTracing.order.address.zipcode}}</td>
                    <td>{{myOrderTracing.status}}</td>
                    <td>{{formatDate(myOrderTracing.statusChangedAt)}}</td>
                    <td>
                        <button class="btn-sm btn btn-primary m-1" (click)="changeStatus(myOrderTracing.id,'packed')">Packed</button> &nbsp;
                        <button class="btn-sm btn btn-primary m-1" (click)="changeStatus(myOrderTracing.id,'shipped')">Shipped</button> &nbsp;
                        <button class="btn-sm btn btn-primary m-1" (click)="changeStatus(myOrderTracing.id,'at_delivery_centre')">At Delivery Centre</button> &nbsp;
                        <button class="btn-sm btn btn-primary m-1" (click)="changeStatus(myOrderTracing.id,'out_for_delivery')">Out for Delivery</button> &nbsp;
                        <button class="btn-sm btn btn-primary m-1" (click)="changeStatus(myOrderTracing.id,'delivered')">Delivered</button>
                    </td>
                </tr>
            </ng-container>
            
            <ng-container *ngIf="!isDateOlderThan3Days(myOrderTracing.statusChangedAt)  && myOrderTracing.status == 'DELIVERED'">
                <tr class="table-success">
                    <td>{{myOrderTracing.id}}</td>
                    <td>{{myOrderTracing.order.productVariation.product.id}}</td>
                    <td>{{myOrderTracing.order.productVariation.product.name}}</td>
                    <td>{{myOrderTracing.order.productVariation.size}}</td>
                    <td>{{myOrderTracing.order.quantity}}</td>
                    <td>{{myOrderTracing.order.address.name}} |
                        {{myOrderTracing.order.address.contact}} |
                        {{myOrderTracing.order.address.address1}}, {{myOrderTracing.order.address.address2}}
                        {{myOrderTracing.order.address.city}}, {{myOrderTracing.order.address.status}}
                        {{myOrderTracing.order.address.country}}, {{myOrderTracing.order.address.zipcode}}</td>
                    <td>{{myOrderTracing.status}}</td>
                    <td>{{formatDate(myOrderTracing.statusChangedAt)}}</td>
                    <td>
                        <button disabled class="btn-sm btn btn-primary m-1" (click)="changeStatus(myOrderTracing.id,'packed')">Packed</button> &nbsp;
                        <button disabled class="btn-sm btn btn-primary m-1" (click)="changeStatus(myOrderTracing.id,'shipped')">Shipped</button> &nbsp;
                        <button disabled class="btn-sm btn btn-primary m-1" (click)="changeStatus(myOrderTracing.id,'at_delivery_centre')">At Delivery Centre</button> &nbsp;
                        <button disabled class="btn-sm btn btn-primary m-1" (click)="changeStatus(myOrderTracing.id,'out_for_delivery')">Out for Delivery</button> &nbsp;
                        <button disabled class="btn-sm btn btn-primary m-1" (click)="changeStatus(myOrderTracing.id,'delivered')">Delivered</button>
                    </td>
                </tr>
            </ng-container>
            
        </ng-container>

    </tbody>
</table>